/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package ui;

import constants.Role;
import directory.UserDirectory;
import helper.Helper;
import javax.swing.JOptionPane;
import model.Person;
import model.User;

/**
 *
 * @author drag
 */
public class RegisterJPanel extends javax.swing.JPanel {

	private MainJFrame workSpace;
	private UserDirectory userDir;
	private Role role;

	/**
	 * Creates new form RegisterJPanel
	 */
	public RegisterJPanel(MainJFrame workSpace) {
		initComponents();

		this.workSpace = workSpace;
		this.userDir = workSpace.getUserDir();

		this.workSpace.add(this);
		this.workSpace.pack();

		String txtRole = this.workSpace.getRole() == Role.PROFESSOR ? "professor" : "student";
		this.pageTitle.setText("Register as a " + txtRole);

	}

	/**
	 * This method is called from within the constructor to initialize the
	 * form. WARNING: Do NOT modify this code. The content of this method is
	 * always regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
        private void initComponents() {

                pageTitle = new javax.swing.JLabel();
                lblFirstName = new javax.swing.JLabel();
                txtFirstName = new javax.swing.JTextField();
                lblLastName = new javax.swing.JLabel();
                txtLastName = new javax.swing.JTextField();
                lblEmail = new javax.swing.JLabel();
                txtEmail = new javax.swing.JTextField();
                lblPhone = new javax.swing.JLabel();
                txtPhone = new javax.swing.JTextField();
                lblAddressLine1 = new javax.swing.JLabel();
                txtAddressLine1 = new javax.swing.JTextField();
                lblAddressLine2 = new javax.swing.JLabel();
                txtAddressLine2 = new javax.swing.JTextField();
                lblUserName = new javax.swing.JLabel();
                txtUserName = new javax.swing.JTextField();
                lblPassword = new javax.swing.JLabel();
                txtPassword = new javax.swing.JPasswordField();
                btnRegister = new javax.swing.JButton();
                btnBack = new javax.swing.JButton();

                setBackground(new java.awt.Color(255, 204, 102));

                pageTitle.setFont(new java.awt.Font("Corbel", 1, 24)); // NOI18N
                pageTitle.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
                pageTitle.setText("Register as a");

                lblFirstName.setBackground(java.awt.Color.cyan);
                lblFirstName.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblFirstName.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblFirstName.setText("First name");

                lblLastName.setBackground(java.awt.Color.cyan);
                lblLastName.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblLastName.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblLastName.setText("Last name");

                lblEmail.setBackground(java.awt.Color.cyan);
                lblEmail.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblEmail.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblEmail.setText("Email");

                lblPhone.setBackground(java.awt.Color.cyan);
                lblPhone.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblPhone.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblPhone.setText("Phone");

                lblAddressLine1.setBackground(java.awt.Color.cyan);
                lblAddressLine1.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblAddressLine1.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblAddressLine1.setText("Address line 1");

                lblAddressLine2.setBackground(java.awt.Color.cyan);
                lblAddressLine2.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblAddressLine2.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblAddressLine2.setText("Address line 2");

                lblUserName.setBackground(java.awt.Color.cyan);
                lblUserName.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblUserName.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblUserName.setText("Username");

                lblPassword.setBackground(java.awt.Color.cyan);
                lblPassword.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                lblPassword.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                lblPassword.setText("Password");

                btnRegister.setBackground(java.awt.Color.lightGray);
                btnRegister.setFont(new java.awt.Font("Inter", 1, 15)); // NOI18N
                btnRegister.setText("Register");
                btnRegister.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                btnRegisterActionPerformed(evt);
                        }
                });

                btnBack.setText("<< Back");
                btnBack.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                btnBackActionPerformed(evt);
                        }
                });

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
                this.setLayout(layout);
                layout.setHorizontalGroup(
                        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                                .addContainerGap()
                                                .addComponent(pageTitle, javax.swing.GroupLayout.DEFAULT_SIZE, 971, Short.MAX_VALUE))
                                        .addGroup(layout.createSequentialGroup()
                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addComponent(btnBack))
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addGap(204, 204, 204)
                                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                                        .addGroup(layout.createSequentialGroup()
                                                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                        .addComponent(txtUserName)
                                                                                        .addComponent(lblUserName, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                .addGap(75, 75, 75)
                                                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                        .addComponent(lblPassword, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                                                                        .addComponent(txtPassword, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                                                        .addGroup(layout.createSequentialGroup()
                                                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                                .addComponent(txtAddressLine1)
                                                                                                .addComponent(lblAddressLine1, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                                .addComponent(txtEmail)
                                                                                                .addComponent(lblEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                                .addComponent(txtFirstName)
                                                                                                .addComponent(lblFirstName, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                                                                .addGap(75, 75, 75)
                                                                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                                .addComponent(txtAddressLine2)
                                                                                                .addComponent(lblAddressLine2, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                                .addComponent(txtPhone)
                                                                                                .addComponent(lblPhone, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                                                                .addComponent(txtLastName)
                                                                                                .addComponent(lblLastName, javax.swing.GroupLayout.PREFERRED_SIZE, 234, javax.swing.GroupLayout.PREFERRED_SIZE))))))
                                                        .addGroup(layout.createSequentialGroup()
                                                                .addGap(386, 386, 386)
                                                                .addComponent(btnRegister, javax.swing.GroupLayout.PREFERRED_SIZE, 168, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                                .addGap(0, 0, Short.MAX_VALUE)))
                                .addContainerGap())
                );
                layout.setVerticalGroup(
                        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(pageTitle, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(64, 64, 64)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblFirstName)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtFirstName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblLastName)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtLastName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblEmail)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblPhone)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtPhone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblAddressLine1)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtAddressLine1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblAddressLine2)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtAddressLine2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblUserName)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtUserName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(layout.createSequentialGroup()
                                                .addComponent(lblPassword)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(txtPassword, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(51, 51, 51)
                                .addComponent(btnRegister, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 98, Short.MAX_VALUE)
                                .addComponent(btnBack)
                                .addContainerGap())
                );
        }// </editor-fold>//GEN-END:initComponents

        private void btnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBackActionPerformed
		this.workSpace.getInitJPanel().setVisible(true);
		this.setVisible(false);
		this.workSpace.setRole(null);
        }//GEN-LAST:event_btnBackActionPerformed

    private void btnRegisterActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRegisterActionPerformed
	    String firstName = txtFirstName.getText().trim();
	    if (!validateField("First name", firstName)) {
		    return;
	    }

	    String lastName = txtLastName.getText().trim();
	    if (!validateField("Last name", lastName)) {
		    return;
	    }

	    String email = txtEmail.getText().trim();
	    if (!Helper.validateEmail("Email", email)) {
		    return;
	    }

	    String addressLine1 = txtAddressLine1.getText().trim();
	    if (!validateField("Address line 1", addressLine1)) {
		    return;
	    }

	    String addressLine2 = txtAddressLine2.getText().trim();

	    String phone = txtPhone.getText().trim();
	    if (!Helper.validatePhone("Phone", phone)) {
		    return;
	    }

	    String userName = txtUserName.getText().trim();
	    if (!validateField("User name", userName)) {
		    return;
	    }

	    String password = txtPassword.getText().trim();
	    if (!Helper.validatePassword("Password", password)) {
		    return;
	    }

	    Person p = null;
	    p = new Person(firstName, lastName, email, addressLine1, addressLine2, phone);
	    this.userDir.addUser(new User(userName, password, true, p, this.workSpace.getRole()));
	    this.setVisible(false);
	    this.workSpace.getInitJPanel().setVisible(true);

	    if (this.workSpace.getRole() == Role.STUDENT) {
		    this.workSpace.getStudentDir().inheritData(this.workSpace.getUserDir());
	    } else {
		    this.workSpace.getProfDir().inheritData(this.workSpace.getUserDir());

	    }
    }//GEN-LAST:event_btnRegisterActionPerformed

	private boolean validateField(String name, String field) {
		if (field.length() == 0) {
			JOptionPane.showMessageDialog(this, name + " is required!");
			return false;
		} else {
			return true;
		}
	}

        // Variables declaration - do not modify//GEN-BEGIN:variables
        private javax.swing.JButton btnBack;
        private javax.swing.JButton btnRegister;
        private javax.swing.JLabel lblAddressLine1;
        private javax.swing.JLabel lblAddressLine2;
        private javax.swing.JLabel lblEmail;
        private javax.swing.JLabel lblFirstName;
        private javax.swing.JLabel lblLastName;
        private javax.swing.JLabel lblPassword;
        private javax.swing.JLabel lblPhone;
        private javax.swing.JLabel lblUserName;
        private javax.swing.JLabel pageTitle;
        private javax.swing.JTextField txtAddressLine1;
        private javax.swing.JTextField txtAddressLine2;
        private javax.swing.JTextField txtEmail;
        private javax.swing.JTextField txtFirstName;
        private javax.swing.JTextField txtLastName;
        private javax.swing.JPasswordField txtPassword;
        private javax.swing.JTextField txtPhone;
        private javax.swing.JTextField txtUserName;
        // End of variables declaration//GEN-END:variables
}
